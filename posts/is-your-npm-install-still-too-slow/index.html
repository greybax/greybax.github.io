<!DOCTYPE html>
<html dir="LTR" lang="en">
  <head>
    <meta charset="utf-8">
    <title>Is your npm install still too slow?</title><!-- Yandex Webmaster -->
    <meta name="yandex-verification" content="610e7b6bb48fc4d6">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <meta name="author" content="Aleksandr Filatov">
    <link href="https://alfilatov.com/rss.xml" title="Aleksandr Filatov" rel="alternate" type="application/rss+xml"><!-- Open Sans -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800,700&amp;subset=latin,cyrillic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata:400&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet"><!-- My Styles -->
    <link href="/css/styles.css" rel="stylesheet"><!-- highlight.js -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/monokai_sublime.min.css" rel="stylesheet">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
    <meta property="og:site_name" content="Aleksandr Filatov">
    <meta property="article:author" content="https://alfilatov.com/about/">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@greybax">
    <meta property="description" content="npm, performance, optimization, pnpm, build, frontend, english">
    <meta name="og:url" content="/posts/is-your-npm-install-still-too-slow/">
    <meta name="og:title" content="Is your npm install still too slow?">
    <meta name="og:description" content="npm, performance, optimization, pnpm, build, frontend, english">
  </head>
  <body>
    <header class="no-cover flex-header">
      <div class="to-main-page"><i class="fa fa-chevron-left"></i><a href="/">Main page</a></div>
      <div class="profile"><img src="https://www.gravatar.com/avatar/4ef97675943e8fe05f61adb948e42ef0?s=160" width="50" height="50">
        <nav>
          <ul>
            <li><a href="/about/">About</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <div class="wrap">
      <article><h1>Is your <code>npm install</code> still too slow?</h1><i class="fa fa-calendar">
          <time>January 21, 2019</time></i><br><i class="fa fa-tags"><a href="/tags/index.html#npm"> npm </a><a href="/tags/index.html#performance"> performance </a><a href="/tags/index.html#optimization"> optimization </a><a href="/tags/index.html#pnpm"> pnpm </a><a href="/tags/index.html#build"> build </a><a href="/tags/index.html#frontend"> frontend </a><a href="/tags/index.html#english"> english </a></i><p>Today we have a big choice of package managers for our frontend apps such as JSPM, NPM, Yarn, Bower, etc.. Some of them has been outdated and some of them still grow its popularity such as NPM and Yarn. And everybody who worked with NPM faced with huge size <code>npm_modules</code> directory and dependencies hell in our apps. All these leads us to big performance gaps in build pipelines of our apps.</p>
<p>One of project on which I've worked on has NPM as main package manager and <code>npm install</code> command takes almost 3 minutes on our CI builds. And of course this time still grows with growing our app. Some of devs suggest us to use Yarn, but in this case we will have to face with <a href="https://yarnpkg.com/lang/en/docs/migrating-from-npm/">Migrating to Yarn from NPM</a>. In some ways this is a pretty good solution, but I would to go deeper and found for myself nice solution which nice fit for all our team.</p>
<h2>Solution is PNPM!</h2>
<blockquote>
<p>PNPM - Fast, disk space efficient package manager.</p>
</blockquote>
<p><a href="https://pnpm.js.org/">pnpm.js.org</a></p>
<h3>Pros:</h3>
<ul>
<li><em><strong>Fast</strong></em> - pnpm is as fast and sometimes even faster than NPM and Yarn (see <a href="https://github.com/pnpm/benchmarks-of-javascript-package-managers">benchmarks</a>)</li>
<li><em><strong>Efficient</strong></em> - One version of a package is saved only ever once on a disk. So you save dozens of gigabytes of disk space!</li>
<li><em><strong>Strict</strong></em> - pnpm creates a non-flat <code>node_modules</code>, so code has no access to arbitrary packages</li>
<li>In our case after installing pnpm we've just renamed <code>npm install</code> --> <code>pnpm install</code> in <code>package.json</code> file and build time on our CI decreases from 3 minites to 30 seconds (in 6x times!).</li>
</ul>
<h2>Useful links</h2>
<ul>
<li><a href="https://pnpm.js.org/">PNPM website</a></li>
<li><a href="https://github.com/pnpm">Organization on Github</a></li>
<li><a href="https://github.com/rstacruz">Rico Sta. Cruz - Author @pnpm</a></li>
<li><a href="https://github.com/zkochan">Zoltan Kochan - Maintainer of @pnpm</a></li>
</ul>
      </article><!-- Yandex.RTB R-A-334917-1 -->
      <div id="yandex_rtb_R-A-334917-1"></div>
      <script type="text/javascript">
         (function(w, d, n, s, t) {
             w[n] = w[n] || [];
             w[n].push(function() {
                 Ya.Context.AdvManager.render({
                     blockId: "R-A-334917-1",
                     renderTo: "yandex_rtb_R-A-334917-1",
                     async: true
                 });
             });
             t = d.getElementsByTagName("script")[0];
             s = d.createElement("script");
             s.type = "text/javascript";
             s.src = "//an.yandex.ru/system/context.js";
             s.async = true;
             t.parentNode.insertBefore(s, t);
         })(this, this.document, "yandexContextAsyncCallbacks");
      </script><!-- /Yandex.RTB R-A-334917-1 --><!-- Disqus -->
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        (function() {
           var d = document, s = d.createElement('script');    
           s.src = '//alfilatov.disqus.com/embed.js';
           s.setAttribute('data-timestamp', +new Date());
           (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><!-- /Disqus -->
    </div><!-- Yandex.Metrika counter -->
    <script type="text/javascript">
      (function (d, w, c) {
         (w[c] = w[c] || []).push(function() {
             try {
                 w.yaCounter25504124 = new Ya.Metrika({id:25504124,
                         clickmap:true,
                         trackLinks:true,
                         accurateTrackBounce:true});
             } catch(e) { }
         });
         var n = d.getElementsByTagName("script")[0],
             s = d.createElement("script"),
             f = function () { n.parentNode.insertBefore(s, n); };
         s.type = "text/javascript";
         s.async = true;
         s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";
         if (w.opera == "[object Opera]") {
             d.addEventListener("DOMContentLoaded", f, false);
         } else { f(); }
      })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript>
      <div><img src="//mc.yandex.ru/watch/25504124" style="position:absolute; left:-9999px;" alt=""></div>
    </noscript><!-- /Yandex.Metrika counter --><!-- Google Analytics -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-86970863-1', 'auto');
      ga('send', 'pageview');
    </script><!-- /Google Analytics -->
  </body>
  <footer>
    <hr>
    <center>Made with ❤ and <a href="http://gulpjs.com/">Gulp </a>♦ <a href="https://travis-ci.org/">Travis CI</a>♦ <a href="https://pages.github.com/">GitHub Pages</a></center>
  </footer>
</html>